<% if noise.latlngs? %>

  <%# TODO: set location for map %>
  <div id="map-noise-<%= noise.id %>"
    data-cartography-map
    data-cartography-map-bounds="<%= JSON(noise.map.boundaries) %>"
    data-cartography-map-center="<%= JSON(noise.map.center) %>"
    data-cartography-map-zoom="<%= noise.map.zoom %>"
    data-cartography-map-scrollWheelZoom=false
    >

    <div data-cartography-map-panel id="map-panel-noise-<%= noise.id %>">
    </div>

    <% if last_known_latlng.present? %>
      <div data-cartography-map-marker
        data-cartography-map-marker-latitude="<%= last_known_latlng.latitude %>"
        data-cartography-map-marker-longitude="<%= last_known_latlng.longitude %>"
        data-cartography-map-marker-track=true
        data-cartography-map-marker-awesome-icon="user"
        data-cartography-map-marker-awesome-markerColor="cadetblue"
        data-cartography-map-marker-awesome-markerColor-extraClasses="hidden"
      >
        <p>
          This is you!
        </p>
      </div>
    <% end %>

    <% noise.origins.each do |origin| %>
      <div data-cartography-map-marker
        data-cartography-map-marker-latitude="<%= origin.latitude %>"
        data-cartography-map-marker-longitude="<%= origin.longitude %>"
        data-cartography-map-marker-clickable=false
        data-cartography-map-marker-awesome-icon="circle"
        data-cartography-map-marker-awesome-markerColor="blue"
      >
      </div>
    <% end %>

  </div>
<% end %>
